---
title: "covidproject"
output: html_document
date: "2024-12-21"
author: "Kwasi"
---

# Covid19 EDA Project

## Introduction
This project analyzes a COVID-19 dataset containing daily and cumulative numbers of tests, cases, recoveries and deaths by country. 

I will use dplyr and data visualization with ggplot2 in R. Other techniques  I will employ include filtering data, aggregating daily to cumulative numbers, and scaling statistics to population level

```{r setup, include=FALSE}
knitr::opts_chunk$set(echo = TRUE)
```

## R Markdown

This is an R Markdown document. Markdown is a simple formatting syntax for authoring HTML, PDF, and MS Word documents. For more details on using R Markdown see <http://rmarkdown.rstudio.com>.

When you click the **Knit** button a document will be generated that includes both content as well as the output of any embedded R code chunks within the document. You can embed an R code chunk like this:

```{r}
#load library
library(readr)

covid_df <- read_csv("covid19analysis.csv")
head(covid_df)
```


```{r}
#view dimension of dataset
library(dplyr)
dim(covid_df)
vector_cols <- colnames(covid_df)
glimpse(covid_df)
```

```{r}
#filter and clean dataset by find countries with universal data and removing province state column
covid_df_all_states <- covid_df %>% filter(Province_State == "All States") %>%
  select(-Province_State)
print(covid_df_all_states)

```

```{r}
#selecting columns related to cumulative measures and daily measures

covid_df_all_states_cumulative <- covid_df_all_states %>% select(Date, Continent_Name, Two_Letter_Country_Code, positive, hospitalized, recovered, death, total_tested)
print(covid_df_all_states_cumulative)

covid_df_all_states_daily <- covid_df_all_states %>% select(Date, Country_Region, active, hospitalizedCurr, daily_tested, daily_positive)


```
```{r}
#Identifying countries with highest number of deaths
library(ggplot2)
library(dplyr)
covid_df_all_states_cumulative_max <- covid_df_all_states_cumulative %>%
  group_by(Continent_Name, Two_Letter_Country_Code)%>%
  summarize(max_deaths = max(death, na.rm = TRUE)) %>% 
  filter(max_deaths > 0) 
  print(covid_df_all_states_cumulative_max)
```

## Plotting maximum death for each country
```{r}
ggplot(covid_df_all_states_cumulative_max, aes(x = Two_Letter_Country_Code, y = max_deaths, color = Continent_Name )) + geom_point()

#storing top 3 affected countries in character vector
top_3_death <- c("United States", "United Kingdom", "Italy")
```

```
```
```{r}
#Extracting top 10 cases 
covid_df_all_states_daily_sum <- covid_df_all_states_daily %>%
  group_by(Country_Region)%>%
  summarize(tested = sum(daily_tested), positive = sum(daily_positive),active = sum(active), hospitalized = sum(hospitalizedCurr))%>%
  arrange(desc(tested))

covid_top_10 <- head(covid_df_all_states_daily_sum,10)
print(covid_top_10)
```

#Which countries have highest number of positive cases against the number of tests
```{r}
# Extract the Country_Region column into the countries vector
countries <- covid_top_10$Country_Region

# Extract the tested column into the tested_cases vector
tested_cases <- covid_top_10$tested

# Extract the positive column into the positive_cases vector
positive_cases <- covid_top_10$positive

# Extract the active column into the active_cases vector
active_cases <- covid_top_10$active

# Extract the hospitalized column into the hospitalized_cases vector
hospitalized_cases <- covid_top_10$hospitalized

# Name the tested_cases vector using the countries vector
names(tested_cases) <- countries

# Name the positive_cases vector using the countries vector
names(positive_cases) <- countries

# Name the active_cases vector using the countries vector
names(active_cases) <- countries

# Name the hospitalized_cases vector using the countries vector
names(hospitalized_cases) <- countries

postive_tested_3 <- positive_cases / tested_cases

print(head(postive_tested_3, 3))

```

#Scaling data to poulation level for top 10 countries

#the population reported in 2020 for each of these countries:

### United States: 331,002,651
### Russia: 145,934,462
### Italy: 60,461,826
### India: 1,380,004,385
### Turkey: 84,339,067
### Canada: 37,742,154
### United Kingdom: 67,886,011
### Australia: 25,499,884
### Peru: 32,971,854
### Poland: 37,846,611
```{r}
# Creating matrix to combine vectors
covid_mat <- cbind(tested_cases, positive_cases, active_cases, hospitalized_cases)

#vector with all population values
population <- c(331002651, 145934462, 60461826, 1380004385, 84339067, 37742154, 67886011, 25499884, 32971854, 37846611)

covid_mat <- covid_mat * 100/population

print(covid_mat)
```

#Ranking countries related to their population

```{r}
# Compute rankings for the tested_cases column
tested_cases_rank <- rank(tested_cases)

# Compute rankings for the positive_cases column
positive_cases_rank <- rank(positive_cases)

# Compute rankings for the active_cases column
active_cases_rank <- rank(active_cases)

# Compute rankings for the hospitalized_cases column
hospitalized_cases_rank <- rank(hospitalized_cases)

# Combine rankings into a matrix
covid_mat_rank <- rbind(
  tested_cases_rank,
  positive_cases_rank,
  active_cases_rank,
  hospitalized_cases_rank
)

# Display the matrix
print(covid_mat_rank)

# Display the first row of the matrix
print(covid_mat_rank[1, ])

```

